# æµ‹è¯•æ¡†æ¶ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªä¸º PixelTune é¡¹ç›®è®¾è®¡çš„é›¶è€¦åˆã€å¯æ‰©å±•çš„æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒå¼€å‘ç¯å¢ƒä¸‹çš„åŠŸèƒ½æµ‹è¯•å’Œè°ƒè¯•ã€‚

## ç‰¹æ€§

- âœ… **é›¶è€¦åˆè®¾è®¡** - é€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶ï¼Œä¸å½±å“ç”Ÿäº§ä»£ç 
- âœ… **å¯è§†åŒ–ç•Œé¢** - å‹å¥½çš„æµ‹è¯•æ§åˆ¶é¢æ¿
- âœ… **æ¨¡å—åŒ–æ¶æ„** - è½»æ¾æ·»åŠ æ–°çš„æµ‹è¯•æ¨¡å—
- âœ… **å…¨å±€æ§åˆ¶** - æ”¯æŒæµè§ˆå™¨æ§åˆ¶å°å’Œä»£ç å†…è°ƒç”¨
- âœ… **è‡ªåŠ¨ç¯å¢ƒç®¡ç†** - å¼€å‘ç¯å¢ƒè‡ªåŠ¨å¯ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨ç¦ç”¨

## å¿«é€Ÿå¼€å§‹

### 1. å¼€å‘ç¯å¢ƒè‡ªåŠ¨è¿è¡Œ

åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œæµ‹è¯•æ¡†æ¶ä¼šè‡ªåŠ¨åˆå§‹åŒ–å¹¶æ˜¾ç¤ºæµ‹è¯•é¢æ¿ï¼š

```bash
npm run dev
```

è®¿é—® `http://localhost:5173`ï¼Œæ‚¨ä¼šçœ‹åˆ°å³ä¸Šè§’çš„æµ‹è¯•æ¡†æ¶é¢æ¿ã€‚

### 2. æ‰‹åŠ¨æ§åˆ¶æµ‹è¯•æ¡†æ¶

#### æ˜¾ç¤º/éšè—æµ‹è¯•é¢æ¿
- ç‚¹å‡»å³ä¸Šè§’çš„ ğŸ§ª æŒ‰é’®
- æˆ–åœ¨æµè§ˆå™¨æ§åˆ¶å°è¾“å…¥ï¼š
```javascript
window.showTestFramework()  // æ˜¾ç¤º
window.hideTestFramework()  // éšè—
```

#### è¿è¡Œæµ‹è¯•
- ç‚¹å‡»é¢æ¿ä¸­çš„"è¿è¡Œæ‰€æœ‰æµ‹è¯•"æŒ‰é’®
- æˆ–è¿è¡Œç‰¹å®šæ¨¡å—çš„æµ‹è¯•
- æˆ–åœ¨æ§åˆ¶å°è¾“å…¥ï¼š
```javascript
window.runAllTests()                    // è¿è¡Œæ‰€æœ‰æµ‹è¯•
window.runTest('lyricStore')            // è¿è¡Œç‰¹å®šæ¨¡å—
```

### 3. ç¯å¢ƒå˜é‡é…ç½®

#### å¼€å‘ç¯å¢ƒ (.env.development)
```bash
# å¯ç”¨æµ‹è¯•æ¡†æ¶
VITE_ENABLE_TEST_FRAMEWORK=true

# è‡ªåŠ¨è¿è¡Œæµ‹è¯•
VITE_TEST_AUTO_RUN=false

# æ˜¾ç¤ºæµ‹è¯•é¢æ¿
VITE_TEST_SHOW_PANEL=true
```

#### ç”Ÿäº§ç¯å¢ƒ (.env.production)
```bash
# ç¦ç”¨æµ‹è¯•æ¡†æ¶ï¼ˆé»˜è®¤ï¼‰
VITE_ENABLE_TEST_FRAMEWORK=false
```

## æµ‹è¯•æ¡†æ¶ç•Œé¢

### é¢æ¿åŠŸèƒ½
1. **æ ‡é¢˜æ ** - æ˜¾ç¤ºæ¡†æ¶çŠ¶æ€ï¼Œæ”¯æŒæœ€å°åŒ–
2. **æµ‹è¯•æ¨¡å—åˆ—è¡¨** - æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„æµ‹è¯•æ¨¡å—
3. **è¿è¡ŒæŒ‰é’®** - è¿è¡Œæ‰€æœ‰æµ‹è¯•æˆ–å•ä¸ªæ¨¡å—
4. **ç»“æœå±•ç¤º** - æ˜¾ç¤ºæµ‹è¯•ç»Ÿè®¡å’Œè¯¦ç»†ç»“æœ
5. **æ§åˆ¶æŒ‰é’®** - æ¸…é™¤ç»“æœã€å…³é—­é¢æ¿

### æµ‹è¯•ç»“æœè¯´æ˜
- âœ… **ç»¿è‰²** - æµ‹è¯•é€šè¿‡
- âŒ **çº¢è‰²** - æµ‹è¯•å¤±è´¥
- ğŸ“Š **ç»Ÿè®¡ä¿¡æ¯** - æ˜¾ç¤ºé€šè¿‡ç‡ã€æ€»æµ‹è¯•æ•°ç­‰

## æ‰©å±•æµ‹è¯•æ¨¡å—

### 1. åˆ›å»ºæ–°çš„æµ‹è¯•æ¨¡å—

```typescript
// src/tests/stores/yourStore.test.ts
import type { TestModule, TestResult } from '../types/test.types'

export class YourStoreTestModule implements TestModule {
  name = 'yourStore'
  description = 'ä½ çš„å­˜å‚¨åŠŸèƒ½æµ‹è¯•'
  private results: TestResult[] = []

  runAllTests(): void {
    this.results = []
    
    // è¿è¡Œä½ çš„æµ‹è¯•
    this.testFeature1()
    this.testFeature2()
  }

  getResults(): TestResult[] {
    return this.results
  }

  private testFeature1(): void {
    try {
      // æµ‹è¯•é€»è¾‘
      const passed = /* æµ‹è¯•ç»“æœ */
      
      this.results.push({
        testName: 'åŠŸèƒ½1æµ‹è¯•',
        passed,
        message: passed ? 'æµ‹è¯•é€šè¿‡' : 'æµ‹è¯•å¤±è´¥',
        timestamp: new Date()
      })
    } catch (error) {
      this.results.push({
        testName: 'åŠŸèƒ½1æµ‹è¯•',
        passed: false,
        error: error instanceof Error ? error.message : String(error),
        timestamp: new Date()
      })
    }
  }
}

export default YourStoreTestModule
```

### 2. æ³¨å†Œæµ‹è¯•æ¨¡å—

åœ¨ `src/tests/index.ts` ä¸­æ·»åŠ ï¼š

```typescript
import YourStoreTestModule from './stores/yourStore.test'

export function initializeTestFramework(): void {
  // ... ç°æœ‰ä»£ç 
  
  // æ³¨å†Œæ–°çš„æµ‹è¯•æ¨¡å—
  testRegistry.registerTest({
    name: 'yourStore',
    description: 'ä½ çš„å­˜å‚¨åŠŸèƒ½æµ‹è¯•',
    TestClass: YourStoreTestModule
  })
}
```

## æµè§ˆå™¨æ§åˆ¶å°ä½¿ç”¨

### å…¨å±€å‡½æ•°
```javascript
// æ˜¾ç¤º/éšè—æµ‹è¯•æ¡†æ¶
window.showTestFramework()
window.hideTestFramework()

// è¿è¡Œæµ‹è¯•
window.runTest('lyricStore')      // è¿è¡Œç‰¹å®šæ¨¡å—
window.runAllTests()              // è¿è¡Œæ‰€æœ‰æ¨¡å—

// è·å–æµ‹è¯•ç»“æœ
window.getTestResults()           // è·å–æ‰€æœ‰ç»“æœ
window.getTestResults('lyricStore') // è·å–ç‰¹å®šæ¨¡å—ç»“æœ
```

### ä¾¿æ·å‡½æ•°
```javascript
// è¿è¡Œæ­Œè¯å­˜å‚¨æµ‹è¯•
runLyricStoreTest()

// è¿è¡Œæ‰€æœ‰æµ‹è¯•
runAllTests()

// è·å–æµ‹è¯•ç»Ÿè®¡
getTestStats()
```

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ TestFramework.vue      # ä¸»æµ‹è¯•æ¡†æ¶ç»„ä»¶
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â””â”€â”€ lyricStore.test.ts     # æ­Œè¯å­˜å‚¨æµ‹è¯•
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ testRegistry.ts        # æµ‹è¯•æ³¨å†Œä¸­å¿ƒ
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ test.types.ts          # æµ‹è¯•ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ index.ts                   # æµ‹è¯•æ¡†æ¶å…¥å£
â”œâ”€â”€ .env.development               # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ .env.production                # ç”Ÿäº§ç¯å¢ƒé…ç½®
â””â”€â”€ docs/
    â””â”€â”€ æµ‹è¯•æ¡†æ¶ä½¿ç”¨æŒ‡å—.md         # æœ¬æ–‡æ¡£
```

## æœ€ä½³å®è·µ

### 1. æµ‹è¯•ç¼–å†™åŸåˆ™
- **å•ä¸€èŒè´£** - æ¯ä¸ªæµ‹è¯•æ–¹æ³•åªæµ‹è¯•ä¸€ä¸ªåŠŸèƒ½ç‚¹
- **ç‹¬ç«‹æ€§** - æµ‹è¯•ä¹‹é—´ä¸åº”ç›¸äº’ä¾èµ–
- **å¯é‡å¤æ€§** - æµ‹è¯•å¯ä»¥å¤šæ¬¡è¿è¡Œï¼Œç»“æœä¸€è‡´
- **å¿«é€Ÿæ‰§è¡Œ** - æµ‹è¯•åº”è¯¥å¿«é€Ÿå®Œæˆ

### 2. é”™è¯¯å¤„ç†
- ä½¿ç”¨ try-catch æ•è·å¼‚å¸¸
- æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
- è®°å½•æµ‹è¯•æ‰§è¡Œæ—¶é—´

### 3. ç»“æœéªŒè¯
- éªŒè¯æ‰€æœ‰å…³é”®çŠ¶æ€
- æ£€æŸ¥è¾¹ç•Œæ¡ä»¶
- ç¡®è®¤ç±»å‹æ­£ç¡®æ€§

## æ•…éšœæ’é™¤

### æµ‹è¯•æ¡†æ¶ä¸æ˜¾ç¤º
1. æ£€æŸ¥ç¯å¢ƒå˜é‡ `VITE_ENABLE_TEST_FRAMEWORK=true`
2. ç¡®è®¤åœ¨å¼€å‘ç¯å¢ƒä¸‹è¿è¡Œ
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### æµ‹è¯•è¿è¡Œå¤±è´¥
1. æŸ¥çœ‹æ§åˆ¶å°è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤ç›¸å…³ store å·²æ­£ç¡®åˆå§‹åŒ–
3. æ£€æŸ¥æµ‹è¯•æ¨¡å—æ˜¯å¦æ­£ç¡®æ³¨å†Œ

### ç±»å‹é”™è¯¯
1. è¿è¡Œ `npx vue-tsc --noEmit` æ£€æŸ¥ç±»å‹
2. ç¡®è®¤æµ‹è¯•æ¨¡å—æ­£ç¡®å®ç° `TestModule` æ¥å£
3. æ£€æŸ¥å¯¼å…¥è·¯å¾„æ˜¯å¦æ­£ç¡®

## æ›´æ–°æ—¥å¿—

### v1.0.0
- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ§ª å®Œæ•´çš„æµ‹è¯•æ¡†æ¶å®ç°
- ğŸ“Š å¯è§†åŒ–æµ‹è¯•é¢æ¿
- ğŸ”§ é›¶è€¦åˆæ¶æ„è®¾è®¡
- ğŸŒ å…¨å±€æ§åˆ¶å°æ”¯æŒ